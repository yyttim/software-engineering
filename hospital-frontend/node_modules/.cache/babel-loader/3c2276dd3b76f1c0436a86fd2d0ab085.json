{"remainingRequest":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/babel-loader/lib/index.js!/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/src/views/order/OrderOperate.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/src/views/order/OrderOperate.vue","mtime":1700395042000},{"path":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/babel.config.js","mtime":1700395042000},{"path":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1713934405844},{"path":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/babel-loader/lib/index.js","mtime":1713934405672},{"path":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1713934405844},{"path":"/Users/xuechao6/Desktop/Trad/016-医院挂号系统/016-医院管理系统/源码/hospital-frontend/node_modules/vue-loader/lib/index.js","mtime":1713934404154}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IGp3dERlY29kZSBmcm9tICJqd3QtZGVjb2RlIjsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL3N0b3JhZ2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIm9yZGVyT3BlcmF0ZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v56eR5a6k5pWw5o2uCiAgICAgIHNlY3Rpb246ICIiLAogICAgICBpbnRlcnM6IFsi56We57uP5YaF56eRIiwgIuWRvOWQuOS4juWNsemHjeeXh+WMu+WtpuenkSIsICLlhoXliIbms4znp5EiLCAi5raI5YyW5YaF56eRIiwgIuW/g+ihgOeuoeWGheenkSIsICLogr7lhoXnp5EiLCAi5Y+R54Ot6Zeo6K+KIl0sCiAgICAgIG91dHM6IFsi5omL6Laz5aSW56eRIiwgIuaZrumAmuWkluenkSIsICLogpvogqDlpJbnp5EiLCAi56We57uP5aSW56eRIiwgIuazjOWwv+WkluenkSIsICLpqqjnp5EiLCAi54On5Lyk5pW05b2i5aSW56eRIl0sCiAgICAgIHdvbWVuOiBbIuWmh+enkSIsICLkuqfnp5EiXSwKICAgICAga2lkczogWyLlhL/np5EiLCAi5YS/56ul5L+d5YGl56eRIl0sCiAgICAgIGZpdmVzOiBbIuiAs+m8u+WSveWWieenkSIsICLnnLznp5EiLCAi5Y+j6IWU56eRIl0sCiAgICAgIGNoaW5lc2U6IFsi5Lit5Yy756eRIl0sCiAgICAgIG90aGVyczogWyLlurflpI3ljLvlrabnp5EiLCAi5oCl6K+K56eRIiwgIuearuiCpOaAp+eXheenkSIsICLlip/og73np5EiXSwKICAgICAgLy/ljLvnlJ/liJfooajmlbDmja4KICAgICAgc2VjdGlvbk9wdDogdGhpcy4kcm91dGUucXVlcnkuc2VjdGlvbk9wdCwKICAgICAgc2VjdGlvbkRhdGE6IFtdLAogICAgICBtb250aERheXM6IFtdLAogICAgICBjbGlja1RhZzogZmFsc2UsCiAgICAgIG9yZGVyRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBvcmRlckZvcm06IHsKICAgICAgICBvcmRlckRhdGU6ICIiCiAgICAgIH0sCiAgICAgIHRpbWVzOiBbXSwKICAgICAgb3JkZXJSdWxlczogewogICAgICAgIG9UaW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6YCJ5oup5pe26Ze05q61IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIC8v5oyC5Y+35pel5pyfCiAgICAgIG9yZGVyRGF0ZTogIiIsCiAgICAgIC8v5ou85o6l5pe26Ze05ZKM5pel5pyf5oiQ5Li6b0lkCiAgICAgIGlkVGltZTogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+eCueWHu+enkeWupAogICAgc2VjdGlvbkNsaWNrKHNlY3Rpb25PcHQpIHsKICAgICAgLy/ojrflj5blvZPlpKnnmoTlkI435aSpCiAgICAgIHRoaXMubW9udGhEYXlzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7CiAgICAgICAgdGhpcy5ub3dEYXkoaSk7CiAgICAgIH0KICAgICAgdGhpcy5zZWN0aW9uID0gc2VjdGlvbk9wdDsKICAgICAgLy/ml6XmnJ/lt7Lnu4/pgInkuobml7blgJnvvIzor7fmsYLlvZPml6XlgLznj63np5HlrqTljLvnlJ8KICAgICAgaWYgKHRoaXMub3JkZXJEYXRlICE9IHVuZGVmaW5lZCkgewogICAgICAgIHJlcXVlc3QuZ2V0KCIvYXJyYW5nZS9maW5kQnlUaW1lIiwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGFyVGltZTogdGhpcy5vcmRlckRhdGUsCiAgICAgICAgICAgIGRTZWN0aW9uOiB0aGlzLnNlY3Rpb24KICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLnNlY3Rpb25EYXRhID0gcmVzLmRhdGEuZGF0YS5tYXAoaXRlbSA9PiBpdGVtLmRvY3Rvcik7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIOino+eggXRva2VuCiAgICAgIHRoaXMub3JkZXJGb3JtLnBOYW1lID0gdGhpcy50b2tlbkRlY29kZShnZXRUb2tlbigpKS5wTmFtZTsKICAgICAgdGhpcy5vcmRlckZvcm0ucENhcmQgPSB0aGlzLnRva2VuRGVjb2RlKGdldFRva2VuKCkpLnBDYXJkOwogICAgICB0aGlzLm9yZGVyRm9ybS5wSWQgPSB0aGlzLnRva2VuRGVjb2RlKGdldFRva2VuKCkpLnBJZDsKICAgIH0sCiAgICAvL+aJk+W8gOaMguWPt+WvueivneahhuinpuWPkSzojrflj5bmjILlj7fml7bpl7TmrrXlt7LliankvZnnpajmlbAKICAgIHJlcXVlc3RUaW1lKGlkKSB7CiAgICAgIHRoaXMuaWRUaW1lID0gaWQgKyB0aGlzLm9yZGVyRGF0ZTsKICAgICAgcmVxdWVzdC5nZXQoIm9yZGVyL2ZpbmRPcmRlclRpbWUiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBhcklkOiB0aGlzLmlkVGltZQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aGlzLm9yZGVyRGF0ZSk7CiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IGlzVG9kYXkgPSBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCkgJiYgZGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpICYmIGRhdGUuZ2V0RGF0ZSgpID09PSB0b2RheS5nZXREYXRlKCk7CiAgICAgICAgdmFyIGFycmF5ID0gW107CiAgICAgICAgaWYgKCF0aGlzLmlzVGltZUFmdGVyVGFyZ2V0KCIwOTozMCIpIHx8ICFpc1RvZGF5KSB7CiAgICAgICAgICBhcnJheS5wdXNoKCIwODozMC0wOTozMCAgIiArICIgICDkvZnlj7cgIiArICIxIik7CiAgICAgICAgfQogICAgICAgIGlmICghdGhpcy5pc1RpbWVBZnRlclRhcmdldCgiMTA6MzAiKSB8fCAhaXNUb2RheSkgewogICAgICAgICAgYXJyYXkucHVzaCgiMDk6MzAtMTA6MzAgICIgKyAiICAg5L2Z5Y+3ICIgKyAiMSIpOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMuaXNUaW1lQWZ0ZXJUYXJnZXQoIjExOjMwIikgfHwgIWlzVG9kYXkpIHsKICAgICAgICAgIGFycmF5LnB1c2goIjEwOjMwLTExOjMwICAiICsgIiAgIOS9meWPtyAiICsgIjEiKTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLmlzVGltZUFmdGVyVGFyZ2V0KCIxNTozMCIpIHx8ICFpc1RvZGF5KSB7CiAgICAgICAgICBhcnJheS5wdXNoKCIxNDozMC0xNTozMCAgIiArICIgICDkvZnlj7cgIiArICIxIik7CiAgICAgICAgfQogICAgICAgIGlmICghdGhpcy5pc1RpbWVBZnRlclRhcmdldCgiMTY6MzAiKSB8fCAhaXNUb2RheSkgewogICAgICAgICAgYXJyYXkucHVzaCgiMTU6MzAtMTY6MzAgICIgKyAiICAg5L2Z5Y+3ICIgKyAiMSIpOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMuaXNUaW1lQWZ0ZXJUYXJnZXQoIjE3OjMwIikgfHwgIWlzVG9kYXkpIHsKICAgICAgICAgIGFycmF5LnB1c2goIjE2OjMwLTE3OjMwICAiICsgIiAgIOS9meWPtyAiICsgIjEiKTsKICAgICAgICB9CiAgICAgICAgdGhpcy50aW1lcyA9IGFycmF5OwogICAgICB9KTsKICAgIH0sCiAgICBpc1RpbWVBZnRlclRhcmdldCh0aW1lU3RyaW5nKSB7CiAgICAgIC8vIOWIpOaWreaXtumXtOaYr+WQpui2hei/h3RpbWVTdHJpbmco5YWl5Y+C5qC85byP5aaC77yaMDk6MzApCiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKTsKCiAgICAgIC8vIOino+aekOS8oOWFpeeahOebruagh+aXtumXtOWtl+espuS4su+8jOiOt+WPluWwj+aXtuWSjOWIhumSnwogICAgICBjb25zdCBbdGFyZ2V0SG91ciwgdGFyZ2V0TWludXRlXSA9IHRpbWVTdHJpbmcuc3BsaXQoIjoiKTsKCiAgICAgIC8vIOiuvue9ruimgeavlOi+g+eahOaXtumXtAogICAgICBjb25zdCB0YXJnZXRUaW1lID0gbmV3IERhdGUoKTsKICAgICAgdGFyZ2V0VGltZS5zZXRIb3Vycyh0YXJnZXRIb3VyKTsKICAgICAgdGFyZ2V0VGltZS5zZXRNaW51dGVzKHRhcmdldE1pbnV0ZSk7CiAgICAgIHRhcmdldFRpbWUuc2V0U2Vjb25kcygwKTsKCiAgICAgIC8vIOavlOi+g+W9k+WJjeaXtumXtOaYr+WQpui2hei/h+S6huebruagh+aXtumXtAogICAgICByZXR1cm4gY3VycmVudFRpbWUgPiB0YXJnZXRUaW1lOwogICAgfSwKICAgIC8v5oyC5Y+354K55Ye756Gu6K6kCiAgICBvcmRlclN1Y2Nlc3MoZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgcmVxdWVzdC5nZXQoInBhdGllbnQvYWRkT3JkZXIiLCB7CiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHBJZDogdGhpcy5vcmRlckZvcm0ucElkLAogICAgICAgICAgICAgIGRJZDogdGhpcy5vcmRlckZvcm0uZElkLAogICAgICAgICAgICAgIG9TdGFydDogdGhpcy5vcmRlckZvcm0ub3JkZXJEYXRlICsgIiAiICsgdGhpcy5vcmRlckZvcm0ub1RpbWUsCiAgICAgICAgICAgICAgYXJJZDogdGhpcy5pZFRpbWUKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzICE9IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsKICAgICAgICAgICAgdGhpcy5vcmRlckZvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5oyC5Y+35oiQ5Yqf77yBIik7CiAgICAgICAgICAgIHRoaXMub3JkZXJGb3JtLm9UaW1lID0gJyc7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy90b2tlbuino+eggQogICAgdG9rZW5EZWNvZGUodG9rZW4pIHsKICAgICAgaWYgKHRva2VuICE9PSBudWxsKSByZXR1cm4gand0RGVjb2RlKHRva2VuKTsKICAgIH0sCiAgICAvL+aJk+W8gOaMguWPt+WvueivneahhgogICAgb3BlbkNsaWNrKGlkLCBuYW1lKSB7CiAgICAgIHRoaXMub3JkZXJGb3JtLmRJZCA9IGlkOwogICAgICB0aGlzLm9yZGVyRm9ybS5kTmFtZSA9IG5hbWU7CiAgICAgIHRoaXMub3JkZXJGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIC8v6K+35rGC5oyC5Y+35pe26Ze05q61CiAgICAgIHRoaXMucmVxdWVzdFRpbWUoaWQpOwogICAgfSwKICAgIC8v6YCJ5oup5pel5pyf6Kem5Y+R5pe26Ze0CiAgICBkYXRlQ2xpY2soZGF0ZSkgewogICAgICAvL+iOt+WPluaMguWPt+W5tOaciOaXpQogICAgICBjb25zdCBub3dEYXRlID0gbmV3IERhdGUoKTsKICAgICAgbGV0IHllYXIgPSBub3dEYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgIHRoaXMub3JkZXJGb3JtLm9yZGVyRGF0ZSA9IHllYXIgKyAiLSIgKyBkYXRlOwogICAgICBsZXQgZGF0ZVllYXIgPSB5ZWFyICsgIi0iICsgZGF0ZTsKICAgICAgdGhpcy5vcmRlckRhdGUgPSBkYXRlWWVhcjsKICAgICAgcmVxdWVzdC5nZXQoIi9hcnJhbmdlL2ZpbmRCeVRpbWUiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBhclRpbWU6IGRhdGVZZWFyLAogICAgICAgICAgZFNlY3Rpb246IHRoaXMuc2VjdGlvbgogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc2VjdGlvbkRhdGEgPSByZXMuZGF0YS5kYXRhLm1hcChpdGVtID0+IGl0ZW0uZG9jdG9yKTsKICAgICAgICB0aGlzLmNsaWNrVGFnID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5blvZPlpKnlj4rlkI435aSp55qE5pel5pyf5pif5pyfCiAgICBub3dEYXkobnVtKSB7CiAgICAgIHZhciBub3dEYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGN1cnJlbnRIb3VyID0gbm93RGF0ZS5nZXRIb3VycygpOwogICAgICB2YXIgY3VycmVudE1pbnV0ZSA9IG5vd0RhdGUuZ2V0TWludXRlcygpOwoKICAgICAgLy8g5Yik5pat5b2T5YmN5pe26Ze05piv5ZCm5bey57uP6L+H5LqGMTc6MzAKICAgICAgaWYgKGN1cnJlbnRIb3VyID4gMTcgfHwgY3VycmVudEhvdXIgPT09IDE3ICYmIGN1cnJlbnRNaW51dGUgPiAzMCkgewogICAgICAgIG51bSsrOyAvLyDmrKHml6UKICAgICAgfQogICAgICBub3dEYXRlLnNldERhdGUobm93RGF0ZS5nZXREYXRlKCkgKyBudW0pOwogICAgICBsZXQgbW9udGggPSBub3dEYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICBsZXQgZGF0ZSA9IG5vd0RhdGUuZ2V0RGF0ZSgpOwogICAgICBpZiAoZGF0ZSA8IDEwKSB7CiAgICAgICAgZGF0ZSA9ICIwIiArIGRhdGU7CiAgICAgIH0KICAgICAgaWYgKG1vbnRoIDwgMTApIHsKICAgICAgICBtb250aCA9ICIwIiArIG1vbnRoOwogICAgICB9CiAgICAgIHZhciB0aW1lID0gbW9udGggKyAiLSIgKyBkYXRlOwogICAgICB0aGlzLm1vbnRoRGF5cy5wdXNoKHRpbWUpOwogICAgfQogIH0KfTs="},{"version":3,"names":["request","jwtDecode","getToken","name","data","section","inters","outs","women","kids","fives","chinese","others","sectionOpt","$route","query","sectionData","monthDays","clickTag","orderFormVisible","orderForm","orderDate","times","orderRules","oTime","required","message","trigger","idTime","methods","sectionClick","i","nowDay","undefined","get","params","arTime","dSection","then","res","map","item","doctor","pName","tokenDecode","pCard","pId","requestTime","id","arId","date","Date","today","isToday","getFullYear","getMonth","getDate","array","isTimeAfterTarget","push","timeString","currentTime","targetHour","targetMinute","split","targetTime","setHours","setMinutes","setSeconds","orderSuccess","formName","$refs","validate","valid","dId","oStart","status","$message","error","msg","success","token","openClick","dName","dateClick","nowDate","year","dateYear","num","currentHour","getHours","currentMinute","getMinutes","setDate","month","time"],"sources":["src/views/order/OrderOperate.vue"],"sourcesContent":["<!--\n * 病患挂号科室选择页面\n *\n * @Author: ShanZhu\n * @Date: 2023-11-17\n-->\n<template>\n<div>\n  <el-card>\n\n    <span style=\"color: #2b5d88\">请选择科室进行挂号</span>\n\n    <el-divider></el-divider>\n\n    <!--科室选择 -->\n    <el-tabs type=\"border-card\">\n      <el-tab-pane label=\"内科\">\n        <ul>\n          <li v-for=\"inter in inters\" :key=\"inter\">\n            <el-button type=\"success\" plain key=\"inter-button\"  style=\"margin: 5px;\" @click=\"sectionClick(inter)\">{{ inter }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n      <el-tab-pane label=\"外科\">\n        <ul>\n          <li v-for=\"out in outs\" :key=\"out\">\n            <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(out)\">{{ out }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n      <el-tab-pane label=\"妇产科\">\n        <ul>\n          <li v-for=\"woman in women\" :key=\"woman\">\n            <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(woman)\">{{ woman }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n      <el-tab-pane label=\"儿科\">\n        <ul>\n          <li v-for=\"kid in kids\" :key=\"kid\">\n            <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(kid)\">{{ kid }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n      <el-tab-pane label=\"五官科\">\n        <ul>\n          <li v-for=\"five in fives\" :key=\"five\">\n            <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(five)\">{{ five }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n      <el-tab-pane label=\"中医科\">\n        <ul>\n          <li v-for=\"chinese in chinese\" :key=\"chinese\">\n            <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(chinese)\">{{ chinese }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n      <el-tab-pane label=\"其他\">\n        <ul>\n          <li v-for=\"others in others\" :key=\"others\">\n            <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(others)\">{{ others }}</el-button>\n          </li>\n        </ul>\n      </el-tab-pane>\n    </el-tabs>\n  </el-card>\n\n  <!--科室医生列表-->\n  <el-card>\n    <div class=\"head\">\n      <div>\n        <i class=\"iconfont icon-doctor-list\" style=\"margin: 5px; color: #2b5d88\">医生列表</i>\n        <span style=\"color: #2b5d88\">（科室：<span style=\"color: #e75c09\">{{section}}</span> 挂号时间：<span style=\"color: #e75c09\">{{orderDate}}</span>）</span>\n      </div>\n\n      <el-divider></el-divider>\n\n      <!-- 选择挂号时间 -->\n      <div>\n        <ul class=\"dateUl\">\n          <li v-for=\"monthDay in monthDays\" :key=\"monthDay\">\n            <el-button\n                size=\"mini\"\n                type=\"primary\" plain\n                @click=\"dateClick(monthDay)\"\n            >\n              {{ monthDay }}</el-button>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <br/>\n    <!-- 表格 -->\n    <el-table :data=\"sectionData\" size=\"small\" stripe style=\"width: 100%\" border>\n      <el-table-column type=\"index\" label=\"序号\"width=\"60\"/>\n      <el-table-column prop=\"dId\" label=\"工号\" width=\"80\"/>\n      <el-table-column prop=\"dName\" label=\"姓名\" width=\"80\"/>\n      <el-table-column prop=\"dGender\" label=\"性别\" width=\"60\"/>\n      <el-table-column prop=\"dPost\" label=\"职位\" width=\"100\"/>\n      <el-table-column prop=\"dSection\" label=\"科室\" width=\"100\"/>\n      <el-table-column prop=\"dIntroduction\" label=\"简介\" />\n      <el-table-column prop=\"dPrice\" label=\"挂号费用/元\" width=\"100\"/>\n      <el-table-column prop=\"dAvgStar\" label=\"评价/5分\" width=\"80\"/>\n      <el-table-column label=\"操作\" width=\"140\" v-if=\"clickTag\">\n        <template slot-scope=\"scope\">\n          <el-button\n              class=\"iconfont icon-register-button\"\n              style=\"font-size: 14px\"\n              size=\"mini\"\n              type=\"primary\"\n              @click=\"openClick(scope.row.dId, scope.row.dName)\"\n          >\n            挂号</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n  </el-card>\n  <!-- 挂号对话框 -->\n  <el-dialog title=\"填写挂号信息\" :visible.sync=\"orderFormVisible\">\n    <el-form :model=\"orderForm\" ref=\"orderForm\" :rules=\"orderRules\">\n      <el-form-item\n          label=\"挂号时间段\"\n          label-width=\"100px\"\n          prop=\"oTime\"\n      >\n        <el-select\n            v-model=\"orderForm.oTime\"\n            placeholder=\"请选择\"\n            no-data-text=\"请尝试预约明日\"\n        >\n          <el-option\n              v-for=\"time in times\"\n              :key=\"time\"\n              :label=\"time\"\n              :value=\"time\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"挂号日期\" label-width=\"100px\">\n        <el-input\n            v-model=\"orderForm.orderDate\"\n            autocomplete=\"off\"\n            disabled\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"医生工号\" label-width=\"100px\">\n        <el-input\n            v-model=\"orderForm.dId\"\n            autocomplete=\"off\"\n            disabled\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"医生姓名\" label-width=\"100px\">\n        <el-input\n            v-model=\"orderForm.dName\"\n            autocomplete=\"off\"\n            disabled\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"患者姓名\" label-width=\"100px\">\n        <el-input\n            v-model=\"orderForm.pName\"\n            autocomplete=\"off\"\n            disabled\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"患者身份证号\" label-width=\"100px\">\n        <el-input\n            v-model=\"orderForm.pCard\"\n            autocomplete=\"off\"\n            disabled\n        ></el-input>\n      </el-form-item>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"orderFormVisible = false\" style=\"font-size: 18px;\">\n        <i class=\"iconfont icon-cancel-button\" style=\"font-size: 20px;\"></i> 取 消\n      </el-button>\n      <el-button type=\"primary\" @click=\"orderSuccess('orderForm')\"style=\"font-size: 18px;\">\n        <i class=\"iconfont icon-sure-button\" style=\"font-size: 20px;\"></i> 确 定\n      </el-button>\n    </div>\n  </el-dialog>\n\n\n  </div>\n</template>\n<script>\nimport request from \"@/utils/request\";\nimport jwtDecode from \"jwt-decode\";\nimport {getToken} from \"@/utils/storage\";\n\nexport default {\n  name: \"orderOperate\",\n  data() {\n    return {\n      //科室数据\n      section:\"\",\n      inters: [\n        \"神经内科\",\n        \"呼吸与危重症医学科\",\n        \"内分泌科\",\n        \"消化内科\",\n        \"心血管内科\",\n        \"肾内科\",\n        \"发热门诊\",\n      ],\n      outs: [\n        \"手足外科\",\n        \"普通外科\",\n        \"肛肠外科\",\n        \"神经外科\",\n        \"泌尿外科\",\n        \"骨科\",\n        \"烧伤整形外科\",\n      ],\n      women: [\"妇科\", \"产科\"],\n      kids: [\"儿科\", \"儿童保健科\"],\n      fives: [\"耳鼻咽喉科\", \"眼科\", \"口腔科\"],\n      chinese: [\"中医科\"],\n      others: [\"康复医学科\", \"急诊科\", \"皮肤性病科\", \"功能科\"],\n      //医生列表数据\n      sectionOpt: this.$route.query.sectionOpt,\n      sectionData: [],\n      monthDays: [],\n      clickTag: false,\n      orderFormVisible: false,\n      orderForm: { orderDate: \"\" },\n      times: [],\n      orderRules: {\n        oTime: [\n          { required: true, message: \"选择时间段\", trigger: \"blur\" },\n        ],\n      },\n      //挂号日期\n      orderDate: \"\",\n      //拼接时间和日期成为oId\n      idTime: \"\",\n    };\n  },\n  methods: {\n    //点击科室\n    sectionClick(sectionOpt){\n      //获取当天的后7天\n      this.monthDays = [];\n      for (var i = 0; i < 7; i++) {\n        this.nowDay(i);\n      }\n      this.section = sectionOpt;\n      //日期已经选了时候，请求当日值班科室医生\n      if(this.orderDate != undefined){\n        request\n            .get(\"/arrange/findByTime\", {\n              params: {\n                arTime: this.orderDate,\n                dSection: this.section,\n              },\n            })\n            .then((res) => {\n              this.sectionData = res.data.data.map((item) => item.doctor);\n            });\n      }\n\n      // 解码token\n      this.orderForm.pName = this.tokenDecode(getToken()).pName;\n      this.orderForm.pCard = this.tokenDecode(getToken()).pCard;\n      this.orderForm.pId = this.tokenDecode(getToken()).pId;\n    },\n    //打开挂号对话框触发,获取挂号时间段已剩余票数\n    requestTime(id) {\n      this.idTime = id + this.orderDate;\n      request\n          .get(\"order/findOrderTime\", {\n            params: {\n              arId: this.idTime,\n            },\n          })\n          .then((res) => {\n            const date = new Date(this.orderDate);\n            const today = new Date();\n            const isToday =\n                date.getFullYear() === today.getFullYear() &&\n                date.getMonth() === today.getMonth() &&\n                date.getDate() === today.getDate();\n            var array = [];\n            if (!this.isTimeAfterTarget(\"09:30\") || !isToday) {\n              array.push(\n                  \"08:30-09:30  \" + \"   余号 \" + \"1\"\n              );\n            }\n            if (!this.isTimeAfterTarget(\"10:30\") || !isToday) {\n              array.push(\n                  \"09:30-10:30  \" + \"   余号 \" + \"1\"\n              );\n            }\n            if (!this.isTimeAfterTarget(\"11:30\") || !isToday) {\n              array.push(\n                  \"10:30-11:30  \" + \"   余号 \" + \"1\"\n              );\n            }\n            if (!this.isTimeAfterTarget(\"15:30\") || !isToday) {\n              array.push(\n                  \"14:30-15:30  \" + \"   余号 \" + \"1\"\n              );\n            }\n            if (!this.isTimeAfterTarget(\"16:30\") || !isToday) {\n              array.push(\n                  \"15:30-16:30  \" + \"   余号 \" + \"1\"\n              );\n            }\n            if (!this.isTimeAfterTarget(\"17:30\") || !isToday) {\n              array.push(\n                  \"16:30-17:30  \" + \"   余号 \" + \"1\"\n              );\n            }\n            this.times = array;\n          });\n    },\n    isTimeAfterTarget(timeString) {\n      // 判断时间是否超过timeString(入参格式如：09:30)\n      const currentTime = new Date();\n\n      // 解析传入的目标时间字符串，获取小时和分钟\n      const [targetHour, targetMinute] = timeString.split(\":\");\n\n      // 设置要比较的时间\n      const targetTime = new Date();\n      targetTime.setHours(targetHour);\n      targetTime.setMinutes(targetMinute);\n      targetTime.setSeconds(0);\n\n      // 比较当前时间是否超过了目标时间\n      return currentTime > targetTime;\n    },\n    //挂号点击确认\n    orderSuccess(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          request\n              .get(\"patient/addOrder\", {\n                params: {\n                  pId: this.orderForm.pId,\n                  dId: this.orderForm.dId,\n                  oStart:\n                      this.orderForm.orderDate +\n                      \" \" +\n                      this.orderForm.oTime,\n                  arId: this.idTime,\n                },\n              })\n              .then((res) => {\n                if (res.data.status != 200)\n                  return this.$message.error(\n                      res.data.msg\n                  );\n                this.orderFormVisible = false;\n                this.$message.success(\"挂号成功！\");\n                this.orderForm.oTime = '';\n              });\n        } else {\n          return false;\n        }\n      });\n    },\n    //token解码\n    tokenDecode(token) {\n      if (token !== null) return jwtDecode(token);\n    },\n    //打开挂号对话框\n    openClick(id, name) {\n      this.orderForm.dId = id;\n      this.orderForm.dName = name;\n      this.orderFormVisible = true;\n      //请求挂号时间段\n      this.requestTime(id);\n    },\n    //选择日期触发时间\n    dateClick(date) {\n      //获取挂号年月日\n      const nowDate = new Date();\n      let year = nowDate.getFullYear();\n      this.orderForm.orderDate = year + \"-\" + date;\n      let dateYear = year + \"-\" + date;\n      this.orderDate = dateYear;\n      request\n          .get(\"/arrange/findByTime\", {\n            params: {\n              arTime: dateYear,\n              dSection: this.section,\n            },\n          })\n          .then((res) => {\n            this.sectionData = res.data.data.map((item) => item.doctor);\n            this.clickTag = true;\n          });\n    },\n    //获取当天及后7天的日期星期\n    nowDay(num) {\n      var nowDate = new Date();\n      var currentHour = nowDate.getHours();\n      var currentMinute = nowDate.getMinutes();\n\n      // 判断当前时间是否已经过了17:30\n      if (\n          currentHour > 17 ||\n          (currentHour === 17 && currentMinute > 30)\n      ) {\n        num++; // 次日\n      }\n\n      nowDate.setDate(nowDate.getDate() + num);\n      let month = nowDate.getMonth() + 1;\n      let date = nowDate.getDate();\n      if (date < 10) {\n        date = \"0\" + date;\n      }\n      if (month < 10) {\n        month = \"0\" + month;\n      }\n      var time = month + \"-\" + date;\n\n      this.monthDays.push(time);\n    },\n\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\nul li {\n  display: inline;\n};\n.el-breadcrumb{\n  margin:8px;\n}\n.disabled {\n  background-color: #ddd;\n  border-color: #ddd;\n  color: black;\n  cursor: not-allowed; // 鼠标变化\n  pointer-events: none;\n}\n.router-view {\n  margin-top: 20px;\n}\n.sectionUl li {\n  display: inline;\n  padding: 60px;\n}\n.dateUl li {\n  display: inline;\n  margin: 5px;\n  padding: 1px;\n}\nul li {\n  display: inline;\n};\n.el-breadcrumb{\n  margin:8px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}