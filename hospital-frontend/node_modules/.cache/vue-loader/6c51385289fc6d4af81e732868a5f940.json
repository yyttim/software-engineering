{"remainingRequest":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/src/views/arrange/ArrangeIndex.vue?vue&type=style&index=0&id=63efee7a&scoped=true&lang=scss","dependencies":[{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/src/views/arrange/ArrangeIndex.vue","mtime":1714502008791},{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/css-loader/dist/cjs.js","mtime":1713934404396},{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1713934404154},{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/postcss-loader/src/index.js","mtime":1713934404275},{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/sass-loader/dist/cjs.js","mtime":1713934405905},{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1713934405844},{"path":"/Users/xuechao6/Desktop/Trad/医院管理系统1/hospital-frontend/node_modules/vue-loader/lib/index.js","mtime":1713934404154}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kaXNhYmxlZCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOwogICAgYm9yZGVyLWNvbG9yOiAjZGRkOwogICAgY29sb3I6IGJsYWNrOwogICAgY3Vyc29yOiBub3QtYWxsb3dlZDsgLy8g6byg5qCH5Y+Y5YyWCiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQoucm91dGVyLXZpZXcgewogICAgbWFyZ2luLXRvcDogMjBweDsKfQouc2VjdGlvblVsIGxpIHsKICAgIGRpc3BsYXk6IGlubGluZTsKICAgIHBhZGRpbmc6IDYwcHg7Cn0KLmRhdGVVbCBsaSB7CiAgICBkaXNwbGF5OiBpbmxpbmU7CiAgICAvL21hcmdpbjogNXB4OwogICAgcGFkZGluZzogMXB4Owp9CnVsIGxpIHsKICBkaXNwbGF5OiBpbmxpbmU7Cn07Ci5lbC1icmVhZGNydW1iewogIG1hcmdpbjo4cHg7Cn0K"},{"version":3,"sources":["ArrangeIndex.vue"],"names":[],"mappings":";AA+SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArrangeIndex.vue","sourceRoot":"src/views/arrange","sourcesContent":["<template>\n    <div>\n        <!--排班日期选择-->\n        <el-card>\n            <div>\n                <ul class=\"dateUl\">\n                    <li v-for=\"monthDay in monthDays\" :key=\"monthDay\">\n                      <el-button\n                          key=\"date-button\"\n\n                          type=\"primary\"\n                          plain\n                          style=\"margin: 6px\"\n                          @click=\"dateClick(monthDay)\"\n                      >\n                        {{ monthDay }}\n                      </el-button>\n                    </li>\n                </ul>\n            </div>\n        </el-card>\n\n       <!--科室选择-->\n        <el-card>\n          <el-tabs type=\"border-card\">\n            <el-tab-pane label=\"内科\">\n              <ul>\n                <li v-for=\"inter in inters\" :key=\"inter\">\n                  <el-button type=\"success\" plain key=\"inter-button\"  style=\"margin: 5px;\" @click=\"sectionClick(inter)\">{{ inter }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n            <el-tab-pane label=\"外科\">\n              <ul>\n                <li v-for=\"out in outs\" :key=\"out\">\n                  <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(out)\">{{ out }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n            <el-tab-pane label=\"妇产科\">\n              <ul>\n                <li v-for=\"woman in women\" :key=\"woman\">\n                  <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(woman)\">{{ woman }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n            <el-tab-pane label=\"儿科\">\n              <ul>\n                <li v-for=\"kid in kids\" :key=\"kid\">\n                  <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(kid)\">{{ kid }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n            <el-tab-pane label=\"五官科\">\n              <ul>\n                <li v-for=\"five in fives\" :key=\"five\">\n                  <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(five)\">{{ five }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n            <el-tab-pane label=\"中医科\">\n              <ul>\n                <li v-for=\"chinese in chinese\" :key=\"chinese\">\n                  <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(chinese)\">{{ chinese }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n            <el-tab-pane label=\"其他\">\n              <ul>\n                <li v-for=\"others in others\" :key=\"others\">\n                  <el-button type=\"success\" plain style=\"margin: 5px;\" @click=\"sectionClick(others)\">{{ others }}</el-button>\n                </li>\n              </ul>\n            </el-tab-pane>\n          </el-tabs>\n        </el-card>\n\n        <!--科室医生列表-->\n        <el-card>\n          <div>\n            <!--排班信息-->\n            <el-row>\n              <el-col :span=\"8\">\n                <span style=\"color: #3472a6\">排班日期：<span style=\"color: #e75c09\">{{arrangeTime}}</span> 科室：<span style=\"color: #e75c09\">{{section}}</span></span>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <!--搜索栏-->\n              <el-row type=\"flex\">\n                <el-col :span=\"8\">\n                  <el-input v-model=\"query\"\n                            placeholder=\"请输入姓名查询\"\n                            class=\"doctorInput\"\n                  >\n                    <el-button\n                        slot=\"append\"\n                        round\n                        icon=\"iconfont icon-search-button\"\n                        @click=\"requestDoctors\"\n                    ></el-button>\n                  </el-input>\n                </el-col>\n              </el-row>\n            </el-row>\n\n            <!--表格-->\n            <el-row>\n              <el-col>\n                <el-table size=\"small\" :data=\"doctorData\" border>\n                  <el-table-column label=\"账号\" prop=\"dId\" v-model=\"doctorData.dId\"/>\n                  <el-table-column label=\"姓名\" prop=\"dName\" v-model=\"doctorData.dName\"/>\n                  <el-table-column label=\"性别\" prop=\"dGender\" v-model=\"doctorData.dGender\"/>\n                  <el-table-column label=\"职位\" prop=\"dPost\" v-model=\"doctorData.dPost\"/>\n                  <el-table-column label=\"部门\"  prop=\"dSection\" v-model=\"doctorData.dSection\"/>\n                  <el-table-column label=\"操作\" prop=\"dSection\">\n                    <template slot-scope=\"scope\">\n                      <el-button\n                          v-if=\"scope.row.arrangeId == null\"\n                          size=\"mini\"\n                          type=\"primary\"\n\n                          style=\"font-size: 14px;\"\n                          @click=\"arrangeClick(scope.row.dId)\"\n                      > <i class=\"iconfont icon-edit-button\" style=\"font-size: 12px;\"></i>排班</el-button\n                      >\n                      <el-button\n                          v-if=\"scope.row.arrangeId != null\"\n                          size=\"mini\"\n                          type=\"danger\"\n                          style=\"font-size: 14px;\"\n                          @click=\"deleteArrange(scope.row.arrangeId)\"\n                      > <i class=\"iconfont icon-delete-button\" style=\"font-size: 12px;\"></i>取消</el-button\n                      >\n                    </template>\n                  </el-table-column>\n                </el-table>\n\n                <!-- 分页 -->\n                <el-pagination\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    background\n                    layout=\"total, sizes, prev, pager, next, jumper\"\n                    :current-page=\"pageNumber\"\n                    :page-size=\"size\"\n                    :page-sizes=\"[1, 2, 4, 8, 16]\"\n                    :total=\"total\"\n                >\n                </el-pagination>\n              </el-col>\n            </el-row>\n\n          </div>\n        </el-card>\n\n    </div>\n</template>\n<script>\nimport request from \"@/utils/request\";\nconst ARRANGEDATE = \"arrangeDate\";\nexport default {\n    name: \"ArrangeIndex\",\n    data() {\n        return {\n            //日期数据\n            monthDays: [],\n            monthDay: \"\",\n            activePath: \"\",\n            arrangeTime:\"\",\n            //科室数据\n            inters: [\n              \"神经内科\",\n              \"呼吸与危重症医学科\",\n              \"内分泌科\",\n              \"消化内科\",\n              \"心血管内科\",\n              \"肾内科\",\n              \"发热门诊\",\n            ],\n            outs: [\n              \"手足外科\",\n              \"普通外科\",\n              \"肛肠外科\",\n              \"神经外科\",\n              \"泌尿外科\",\n              \"骨科\",\n              \"烧伤整形外科\",\n            ],\n            women: [\"妇科\", \"产科\"],\n            kids: [\"儿科\", \"儿童保健科\"],\n            fives: [\"耳鼻咽喉科\", \"眼科\", \"口腔科\"],\n            chinese: [\"中医科\"],\n            others: [\"康复医学科\", \"急诊科\", \"皮肤性病科\", \"功能科\"],\n            //科室医生表格数据\n            section: \"\",\n            doctorData: [],\n            total: 3,\n            pageNumber: 1,\n            size: 8,\n            query: \"\",\n        };\n    },\n\n    methods: {\n        //日历点击\n        dateClick(monthDay) {\n            const nowDate = new Date();\n            let year = nowDate.getFullYear();\n            let dateTime = year + \"-\" + monthDay;\n            this.arrangeTime = dateTime;\n            sessionStorage.setItem(ARRANGEDATE, dateTime);\n        },\n        //获取当天及后7天的日期星期\n        nowDay(num) {\n            let nowDate = new Date();\n            nowDate.setDate(nowDate.getDate() + num);\n            let month = nowDate.getMonth() + 1;\n            let date = nowDate.getDate();\n            if (date < 10) {\n                date = \"0\" + date;\n            }\n            if (month < 10) {\n                month = \"0\" + month;\n            }\n            let time = month + \"-\" + date;\n            this.monthDays.push(time);\n        },\n        //科室点击\n        sectionClick(section){\n          this.section = section;\n          this.requestDoctors();\n        },\n        //排班点击\n        arrangeClick(dId) {\n          request\n              .get(\"arrange/addArrange\", {\n                params: {\n                  arId: dId + sessionStorage.getItem(\"arrangeDate\"),\n                  arTime: sessionStorage.getItem(\"arrangeDate\"),\n                  dId: dId,\n                },\n              })\n              .then((res) => {\n                if (res.data.status !== 200)\n                  return this.$message.error(\"已排班\");\n                this.$message.success(\"排班成功！\");\n                this.requestDoctors();\n              });\n        },\n        deleteArrange(arrangeId) {\n          request\n              .get(\"arrange/deleteArrange\", {\n                params: {\n                  arId: arrangeId,\n                },\n              })\n              .then((res) => {\n                if (res.data.status !== 200)\n                  return this.$message.error(\"排班信息不存在\");\n                this.$message.success(\"删除排班信息成功！\");\n                this.requestDoctors();\n              });\n        },\n        //页面大小改变时触发\n        handleSizeChange(size) {\n          this.size = size;\n          this.requestDoctors();\n        },\n        //页码改变时触发\n        handleCurrentChange(num) {\n          this.pageNumber = num;\n          this.requestDoctors();\n        },\n        //根据部门请求医生信息\n        requestDoctors() {\n          request\n              .get(\"doctor/findDoctorBySectionPage\", {\n                params: {\n                  pageNumber: this.pageNumber,\n                  size: this.size,\n                  query: this.query,\n                  dSection: this.section,\n                  arrangeDate: sessionStorage.getItem(\"arrangeDate\"),\n                },\n              })\n              .then((res) => {\n                if (res.data.status !== 200)\n                  return this.$message.error(\"数据请求失败\");\n                this.doctorData = res.data.data.doctors;\n                this.total = res.data.data.total;\n              });\n        },\n    },\n    created() {\n        //获取当天的后7天\n        for (let i = 0; i < 25; i++) {\n            this.nowDay(i);\n        }\n    },\n};\n</script>\n<style scoped lang=\"scss\">\n.disabled {\n    background-color: #ddd;\n    border-color: #ddd;\n    color: black;\n    cursor: not-allowed; // 鼠标变化\n    pointer-events: none;\n}\n.router-view {\n    margin-top: 20px;\n}\n.sectionUl li {\n    display: inline;\n    padding: 60px;\n}\n.dateUl li {\n    display: inline;\n    //margin: 5px;\n    padding: 1px;\n}\nul li {\n  display: inline;\n};\n.el-breadcrumb{\n  margin:8px;\n}\n</style>\n"]}]}